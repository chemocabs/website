<section class="how-it-works" id="how-it-works" aria-labelledby="how-heading">
  <div class="container">
    <div class="text-center fade-up">
      <h2 class="section-heading" id="how-heading">{{ section.settings.heading }}</h2>
    </div>

    <div class="how-it-works__steps">
      {%- if section.blocks.size > 0 -%}
        {%- for block in section.blocks -%}
          <div class="how-it-works__step fade-up" {{ block.shopify_attributes }}>
            <div class="how-it-works__num">{{ forloop.index }}</div>
            {%- unless forloop.last -%}
              <div class="how-it-works__connector" aria-hidden="true"></div>
            {%- endunless -%}
            <h3 class="how-it-works__title">{{ block.settings.title }}</h3>
            <p class="how-it-works__desc">{{ block.settings.description }}</p>
          </div>
        {%- endfor -%}
      {%- else -%}
        {%- comment -%} Default Content Fallback {%- endcomment -%}
        <div class="how-it-works__step fade-up">
          <div class="how-it-works__num">1</div>
          <div class="how-it-works__connector" aria-hidden="true"></div>
          <h3 class="how-it-works__title">Submit a Request</h3>
          <p class="how-it-works__desc">Fill out our simple form with your treatment details and pickup location.</p>
        </div>
        <div class="how-it-works__step fade-up">
          <div class="how-it-works__num">2</div>
          <div class="how-it-works__connector" aria-hidden="true"></div>
          <h3 class="how-it-works__title">We Match You</h3>
          <p class="how-it-works__desc">Our team matches you with a volunteer driver or arranges a rideshare.</p>
        </div>
        <div class="how-it-works__step fade-up">
          <div class="how-it-works__num">3</div>
          <div class="how-it-works__connector" aria-hidden="true"></div>
          <h3 class="how-it-works__title">Ride to Treatment</h3>
          <p class="how-it-works__desc">Your ride arrives at your door - completely free. No wallet needed.</p>
        </div>
        <div class="how-it-works__step fade-up">
          <div class="how-it-works__num">4</div>
          <h3 class="how-it-works__title">Get Home Safe</h3>
          <p class="how-it-works__desc">After your appointment, we get you home safely to rest and recover.</p>
        </div>
      {%- endif -%}
    </div>

  </div>
</section>

{% schema %}
{
  "name": "How It Works",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "From Request to Ride in Four Simple Steps"
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "settings": [
        { "type": "text", "id": "title", "label": "Title", "default": "Step Title" },
        { "type": "textarea", "id": "description", "label": "Description" }
      ]
    }
  ],
  "presets": [
    {
      "name": "How It Works",
      "blocks": [
        { "type": "step", "settings": { "title": "Submit a Request", "description": "Fill out our simple form with your treatment details." } },
        { "type": "step", "settings": { "title": "We Match You", "description": "Our team matches you with a driver or arranges a rideshare." } },
        { "type": "step", "settings": { "title": "Ride to Treatment", "description": "Your ride arrives at your door â€” completely free." } },
        { "type": "step", "settings": { "title": "Get Home Safe", "description": "After your appointment, we get you home safely." } }
      ]
    }
  ]
}
{% endschema %}
