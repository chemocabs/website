<section class="ride-request" id="ride-request" aria-labelledby="ride-heading">
  <div class="ride-request__orbs" aria-hidden="true">
    <div class="ride-request__orb ride-request__orb--1"></div>
    <div class="ride-request__orb ride-request__orb--2"></div>
  </div>
  <div class="container" style="position: relative; z-index: 2;">
    <!-- Success State -->
    <div id="ride-success" class="ride-request__success" style="display: none;">
      <div class="ride-request__success-icon">‚úÖ</div>
      <h2>Thank you!</h2>
      <p>We'll be in touch within 24 hours to confirm your ride.</p>
      <p class="ride-request__success-sub">You are not alone. ü©∑</p>
    </div>

    <div class="ride-request__grid" id="ride-grid">
      <div class="ride-request__info">
        <h2 class="ride-request__heading" id="ride-heading">
          {{ section.settings.heading }}
        </h2>
        <p class="ride-request__body">
          {{ section.settings.subheading }}
        </p>
        <ul class="ride-request__features">
          {%- if section.settings.feature_1 != blank -%}<li>{{ section.settings.feature_1 }}</li>{%- endif -%}
          {%- if section.settings.feature_2 != blank -%}<li>{{ section.settings.feature_2 }}</li>{%- endif -%}
          {%- if section.settings.feature_3 != blank -%}<li>{{ section.settings.feature_3 }}</li>{%- endif -%}
        </ul>

        <div class="ride-request__coverage card">
          <h4 class="ride-request__coverage-title">Service Coverage</h4>
          <p class="ride-request__coverage-text">
            Chemo Cabs currently provides direct volunteer and rideshare services throughout the **Greater Toronto Area (GTA)** and neighboring regions. To ensure no patient is left waiting, we are expanding our reach Canada-wide by coordinating and funding rides through Uber, Lyft, and Hopp in all other cities.
          </p>
          <div class="ride-request__urgent">
            <strong>Need an immediate ride?</strong><br>
            Contact us directly at <a href="tel:4169309424">416-930-9424</a> or <a href="mailto:chemocabs@gmail.com">chemocabs@gmail.com</a>
          </div>
        </div>
      </div>

      <div class="ride-request__form-card">
        {%- liquid
          assign has_app_block = false
          for block in section.blocks
            if block.type == '@app'
              assign has_app_block = true
              break
            endif
          endfor
        -%}

        <div class="ride-request__form-content">
          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when '@app' -%}
                {% render block %}
            {%- endcase -%}
          {%- endfor -%}

          {%- if has_app_block == false -%}
            <form id="ride-form" noValidate>
              <div class="ride-request__form-body">
                <div class="form-group">
                  <label class="form-label">Full Name *</label>
                  <input name="name" class="form-input form-input-dark" required>
                </div>
                <div class="form-group">
                  <label class="form-label">Email *</label>
                  <input name="email" type="email" class="form-input form-input-dark" required>
                </div>
                <div class="form-group">
                  <label class="form-label">Phone *</label>
                  <input name="phone" type="tel" class="form-input form-input-dark" placeholder="(555) 123-4567" required>
                </div>
                <div class="form-group">
                  <label class="form-label">City / Province *</label>
                  <input name="city" class="form-input form-input-dark" required>
                </div>
                <div class="form-group">
                  <label class="form-label">Treatment Facility *</label>
                  <input name="facility" class="form-input form-input-dark" required>
                </div>
                <div class="form-group">
                  <label class="form-label">Next Appointment Date *</label>
                  <input name="date" type="date" class="form-input form-input-dark" required>
                </div>
                <div class="form-group">
                  <label class="form-label">Notes</label>
                  <textarea name="notes" class="form-input form-input-dark" rows="3" placeholder="Optional"></textarea>
                </div>
              </div>

              <button type="submit" id="ride-submit" class="btn btn-pink btn-lg btn-full" style="margin-top: 24px;">
                Submit Ride Request ‚Üí
              </button>
              <p class="ride-request__secure">üîí Your information is confidential and secure.</p>
            </form>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Ride Request",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "You Focus on Getting Better. We'll Handle the Ride." },
    { "type": "textarea", "id": "subheading", "label": "Subheading", "default": "Whether it's chemo, radiation, or surgery - submit a request and we'll take care of the rest." },
    { "type": "header", "content": "Feature List" },
    { "type": "text", "id": "feature_1", "label": "Feature 1", "default": "üöó Volunteer drivers or rideshare - your choice" },
    { "type": "text", "id": "feature_2", "label": "Feature 2", "default": "üí∞ Always 100% free for patients" },
    { "type": "text", "id": "feature_3", "label": "Feature 3", "default": "üè• Rides to any cancer treatment facility in Canada" }
  ],
  "blocks": [
    {
      "type": "@app"
    }
  ],
  "presets": [
    {
      "name": "Ride Request",
      "blocks": []
    }
  ]
}
{% endschema %}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('ride-form');
    const grid = document.getElementById('ride-grid');
    const success = document.getElementById('ride-success');
    const submitBtn = document.getElementById('ride-submit');

    if (form) {
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        submitBtn.textContent = 'Submitting...';
        submitBtn.disabled = true;
        
        setTimeout(() => {
          grid.style.display = 'none';
          success.style.display = 'block';
          if (success.scrollIntoView) {
            success.scrollIntoView({ behavior: 'smooth' });
          }
        }, 1500);
      });
    }
  });
</script>



